<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Ludvig Renbo Olsen" />

<meta name="date" content="2021-10-05" />

<title>The available metrics in cvms</title>

<script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  p.abstract{
    text-align: center;
    font-weight: bold;
  }
  div.abstract{
    margin: auto;
    width: 90%;
  }
</style>



<link rel="stylesheet" href="data:text/css,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" type="text/css" />
<link rel="stylesheet" href="data:text/css,h1%20%7B%0Afont%2Dsize%3A190%25%3B%0Apadding%2Dtop%3A20px%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%200%2E5px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Aimg%20%7B%0Amargin%2Dtop%3A%2020px%3B%0Amargin%2Dbottom%3A%2020px%3B%0Aborder%3A0%3B%0A%7D%0Ap%20%7B%0Afont%2Dsize%3A108%25%3B%0Apadding%2Dbottom%3A7px%3B%0A%7D%0Atable%20td%20%7B%0Afont%2Dsize%3A103%25%3B%0A%7D%0Atable%20td%20%2Emath%20%7B%0Afont%2Dsize%3A108%25%3B%0A%7D%0A" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">The available metrics in cvms</h1>
<h4 class="author">Ludvig Renbo Olsen</h4>
<h4 class="date">2021-10-05</h4>
<div class="abstract">
<p class="abstract">Abstract</p>
<p>This vignette lists the available metrics in <code>cvms</code>, along with their formulas.  <br />
 <br />
Contact the author at <a href="mailto:r-pkgs@ludvigolsen.dk" class="email">r-pkgs@ludvigolsen.dk</a>  <br />
 </p>
</div>


<div id="TOC">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#gaussian-metrics">Gaussian Metrics</a></li>
<li><a href="#binomial-metrics">Binomial Metrics</a></li>
<li><a href="#multinomial-metrics">Multinomial Metrics</a></li>
<li><a href="#external-metrics">External metrics</a></li>
</ul>
</div>

<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p><code>cvms</code> has a large set of metrics for model evaluation. In this document, we list the metrics and their formulas.</p>
<p>Some of the metrics in the package are computed with external packages. These are listed at the bottom.</p>
<p>Some of the metrics are disabled by default to avoid cluttering the output tibble. These can be enabled in the <code>metrics</code> argument. This argument takes a list of named booleans, like <code>list(&quot;Accuracy&quot; = FALSE, &quot;Weighted F1&quot; = TRUE)</code>. This can be generated with the helper functions <code>gaussian_metrics()</code>, <code>binomial_metrics()</code>, and <code>multinomial_metrics()</code>. If, for instance, we only wish to calculate the <code>RMSE</code> metric for our regression model, we can use either <code>list(&quot;all&quot; = FALSE, &quot;RMSE&quot; = TRUE)</code> or <code>gaussian_metrics(all = FALSE, rmse = TRUE)</code>.</p>
</div>
<div id="gaussian-metrics" class="section level2">
<h2>Gaussian Metrics</h2>
<p>The metrics used to evaluate regression tasks (like linear regression):</p>
<table>
<colgroup>
<col width="32%" />
<col width="35%" />
<col width="32%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Symbol</th>
<th align="left">Denotes</th>
<th align="left">Formula</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><span class="math inline">\(y\)</span></td>
<td align="left">Targets</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><span class="math inline">\(\hat{y}\)</span></td>
<td align="left">Predictions</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><span class="math inline">\(\bar{y}\)</span></td>
<td align="left">Average target</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><span class="math inline">\(n\)</span></td>
<td align="left">Number of observations</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><span class="math inline">\({\scriptstyle \operatorname{IQR}(x)}\)</span></td>
<td align="left">Interquartile Range</td>
<td align="left"><span class="math inline">\({\scriptstyle \operatorname{quantile}(x, 3/4) - \operatorname{quantile}(x, 1/4)}\)</span></td>
</tr>
<tr class="even">
<td align="left"><span class="math inline">\(\lvert x \rvert\)</span></td>
<td align="left">Absolute value of <span class="math inline">\(x\)</span></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col width="24%" />
<col width="8%" />
<col width="67%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Metric name</th>
<th align="left">Abbreviation</th>
<th align="left">Formula</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Root Mean Square Error</td>
<td align="left">RMSE</td>
<td align="left"><span class="math inline">\(\sqrt{\frac{\sum_{i=1}^{n}(\hat{y}_{i}-y_{i})^2}{n}}\)</span></td>
</tr>
<tr class="even">
<td align="left">Mean Absolute Error</td>
<td align="left">MAE</td>
<td align="left"><span class="math inline">\(\frac{\sum_{i=1}^{n}\lvert\hat{y}_{i}-y_{i}\rvert}{n}\)</span></td>
</tr>
<tr class="odd">
<td align="left">Root Mean Square Log Error</td>
<td align="left">RMSLE</td>
<td align="left"><span class="math inline">\(\sqrt{\frac{\sum_{i=1}^{n}(\ln{(\hat{y}_{i}+1)}-\ln{(y_{i}+1))^2}}{n}}\)</span></td>
</tr>
<tr class="even">
<td align="left">Mean Absolute Log Error</td>
<td align="left">MALE</td>
<td align="left"><span class="math inline">\(\frac{\sum_{i=1}^{n}\lvert\ln{(\hat{y}_{i}+1)}-\ln{(y_{i}+1)\rvert}}{n}\)</span></td>
</tr>
<tr class="odd">
<td align="left">Relative Absolute Error</td>
<td align="left">RAE</td>
<td align="left"><span class="math inline">\(\frac{\sum_{i=1}^{n}\lvert\hat{y}_{i}-y_{i}\rvert}{\sum_{i=1}^{n}\lvert y_{i}-\bar{y}\rvert}\)</span></td>
</tr>
<tr class="even">
<td align="left">Relative Squared Error</td>
<td align="left">RSE</td>
<td align="left"><span class="math inline">\(\frac{\sum_{i=1}^{n}(\hat{y}_{i}-y_{i})^2}{\sum_{i=1}^{n}(y_{i} - \bar{y})^2}\)</span></td>
</tr>
<tr class="odd">
<td align="left">Root Relative Squared Error</td>
<td align="left">RRSE</td>
<td align="left"><span class="math inline">\({\scriptstyle \sqrt{RSE} }\)</span></td>
</tr>
<tr class="even">
<td align="left">Mean Absolute Percentage Error</td>
<td align="left">MAPE</td>
<td align="left"><span class="math inline">\(\frac{1}{n}\sum_{i=1}^{n} \lvert \frac{\hat{y}_{i}-y_{i}}{y_{i}} \rvert\)</span></td>
</tr>
<tr class="odd">
<td align="left">Normalized RMSE</br>(by target range)</td>
<td align="left">NRMSE(RNG)</td>
<td align="left"><span class="math inline">\(\frac{RMSE}{\max{y}-\min{y}}\)</span></td>
</tr>
<tr class="even">
<td align="left">Normalized RMSE</br>(by target IQR)</td>
<td align="left">NRMSE(IQR)</td>
<td align="left"><span class="math inline">\(\frac{RMSE}{\operatorname{IQR}(y)}\)</span></td>
</tr>
<tr class="odd">
<td align="left">Normalized RMSE</br>(by target STD)</td>
<td align="left">NRMSE(STD)</td>
<td align="left"><span class="math inline">\(\frac{RMSE}{\sqrt{\frac{1}{n-1}\sum_{i=1}^{n}(y_i-\bar{y})^2}}\)</span></td>
</tr>
<tr class="even">
<td align="left">Normalized RMSE</br>(by target mean)</td>
<td align="left">NRMSE(AVG)</td>
<td align="left"><span class="math inline">\(\frac{RMSE}{\bar{y}}\)</span></td>
</tr>
<tr class="odd">
<td align="left">Mean Square Error</td>
<td align="left">MSE</td>
<td align="left"><span class="math inline">\(\frac{\sum_{i=1}^{n}(\hat{y}_{i}-y_{i})^2}{n}\)</span></td>
</tr>
<tr class="even">
<td align="left">Total Absolute Error</td>
<td align="left">TAE</td>
<td align="left"><span class="math inline">\({\scriptstyle \sum_{i=1}^{n}\lvert\hat{y}_{i}-y_{i}\rvert}\)</span></td>
</tr>
<tr class="odd">
<td align="left">Total Squared Error</td>
<td align="left">TSE</td>
<td align="left"><span class="math inline">\({\scriptstyle \sum_{i=1}^{n}(\hat{y}_{i}-y_{i})^2}\)</span></td>
</tr>
</tbody>
</table>
</div>
<div id="binomial-metrics" class="section level2">
<h2>Binomial Metrics</h2>
<p>The metrics used to evaluate binary classification tasks:</p>
<p>Based on a confusion matrix, we first count the True Positives (TP), True Negatives (TN), False Positives (FP), and False Negatives (FN). Below, <code>1</code> is the positive class.</p>
<pre><code>#&gt;           Target
#&gt; Prediction 0  1 
#&gt;          0 TN FN
#&gt;          1 FP TP</code></pre>
<p>With these counts, we can calculate the following metrics. Note, that the <code>Kappa</code> metric normalizes the counts to percentages.</p>
<table>
<colgroup>
<col width="27%" />
<col width="8%" />
<col width="63%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Metric name(s)</th>
<th align="left">Abbreviation</th>
<th align="left">Formula</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Accuracy</td>
<td align="left"></td>
<td align="left"><span class="math inline">\(\frac{TP + TN}{TP + TN + FP + FN}\)</span></td>
</tr>
<tr class="even">
<td align="left">Balanced Accuracy</td>
<td align="left"></td>
<td align="left"><span class="math inline">\(\frac{Sensitivity + Specificity}{2}\)</span></td>
</tr>
<tr class="odd">
<td align="left">Sensitivity,</br>Recall,</br>True Positive Rate</td>
<td align="left"></td>
<td align="left"><span class="math inline">\(\frac{TP}{TP + FN}\)</span></td>
</tr>
<tr class="even">
<td align="left">Specificity,</br>True Negative Rate</td>
<td align="left"></td>
<td align="left"><span class="math inline">\(\frac{TN}{TN + FP}\)</span></td>
</tr>
<tr class="odd">
<td align="left">Positive Predictive Value, </br>Precision</td>
<td align="left">Pos Pred Value</td>
<td align="left"><span class="math inline">\(\frac{TP}{TP + FP}\)</span></td>
</tr>
<tr class="even">
<td align="left">Negative Predictive Value</td>
<td align="left">Neg Pred Value</td>
<td align="left"><span class="math inline">\(\frac{TN}{TN + FN}\)</span></td>
</tr>
<tr class="odd">
<td align="left">F1 score</td>
<td align="left"></td>
<td align="left"><span class="math inline">\(2 \cdot \frac{Pos Pred Value \cdot Sensitivity}{Pos Pred Value + Sensitivity}\)</span></td>
</tr>
<tr class="even">
<td align="left">Matthews Correlation Coefficient</td>
<td align="left">MCC</td>
<td align="left"><span class="math inline">\(\frac{TP \cdot TN - FP \cdot FN}{\sqrt{(TP + FP)(TP + FN)(TN + FP) (TN + FN)}}\)</span></br><font size="1.5">Note: When the denominator is 0, we set it to 1 to avoid <code>NaN</code>.</font></td>
</tr>
<tr class="odd">
<td align="left">Detection Rate</td>
<td align="left"></td>
<td align="left"><span class="math inline">\(\frac{TP}{TP + FN + TN + FP}\)</span></td>
</tr>
<tr class="even">
<td align="left">Detection Prevalence</td>
<td align="left"></td>
<td align="left"><span class="math inline">\(\frac{TP + FP}{TP + FN + TN + FP}\)</span></td>
</tr>
<tr class="odd">
<td align="left">Prevalence</td>
<td align="left"></td>
<td align="left"><span class="math inline">\(\frac{TP + FN}{TP + FN + TN + FP}\)</span></td>
</tr>
<tr class="even">
<td align="left">Threat Score</td>
<td align="left"></td>
<td align="left"><span class="math inline">\(\frac{TP}{TP + FN + FP}\)</span></td>
</tr>
<tr class="odd">
<td align="left">False Negative Rate</td>
<td align="left"></td>
<td align="left"><span class="math inline">\({\scriptstyle 1 - Sensitivity}\)</span></td>
</tr>
<tr class="even">
<td align="left">False Positive Rate</td>
<td align="left"></td>
<td align="left"><span class="math inline">\({\scriptstyle 1 - Specificity}\)</span></td>
</tr>
<tr class="odd">
<td align="left">False Discovery Rate</td>
<td align="left"></td>
<td align="left"><span class="math inline">\({\scriptstyle 1 - Pos Pred Value}\)</span></td>
</tr>
<tr class="even">
<td align="left">False Omission Rate</td>
<td align="left"></td>
<td align="left"><span class="math inline">\({\scriptstyle 1 - Neg Pred Value}\)</span></td>
</tr>
<tr class="odd">
<td align="left">Kappa</td>
<td align="left"></td>
<td align="left"><font size="1.5">For Kappa, the counts (<code>TP</code>, <code>TN</code>, <code>FP</code>, <code>FN</code>) are normalized to percentages (summing to 1). Then:</font></br> <span class="math inline">\({\scriptstyle p_{observed} = TP + TN}\)</span> </br> <span class="math inline">\({\scriptstyle p_{expected} = (TN + FP)(TN + FN) + (FN + TP)(FP + TP)}\)</span> </br> <span class="math inline">\(Kappa = \frac{p_{observed} - p_{expected}}{1 - p_{expected}}\)</span></td>
</tr>
</tbody>
</table>
</div>
<div id="multinomial-metrics" class="section level2">
<h2>Multinomial Metrics</h2>
<p>We have four types of metrics for the multiclass classification evaluation:</p>
<p><strong>Overall</strong> metrics simply look at whether a prediction is correct or not. Currently, <code>cvms</code> only has the <code>Overall Accuracy</code>.</p>
<p>The <strong>Macro</strong>/<strong>Average</strong> metrics are based on <em>one-vs-all</em> evaluations of each class. In a <em>one-vs-all</em> evaluation, we set all predictions and targets for the current class to <code>1</code> and all others to <code>0</code> ( <span class="math inline">\({\scriptstyle y_{o,c} = 1 \text{ if } y_{o} = c \text{ else } 0}\)</span> and <span class="math inline">\({\scriptstyle \hat{y}_{o,c} = 1 \text{ if } \hat{y} _{o} = c \text{ else } 0}\)</span> ) and perform a binomial evaluation. Once done for all classes, we average the results. Note that this is sometimes referred to as one-vs-rest, as it is the current class against the rest of the classes.</p>
<!-- Note that the space between \hat{y} and _{o} has to be there for the rendering to work -->
<p>With a few exceptions (<code>AUC</code> and <code>MCC</code>), the metrics in the multinomial outputs that share their name with the <em>binomial metrics</em> are macro metrics. <code>AUC</code> and <code>MCC</code> instead have specific <strong>multiclass variants</strong>.</p>
<p>The <strong>Weighted</strong> metrics are averages, similar to the macro metrics, but weighted by the <code>Support</code> for each class.</p>
<table>
<colgroup>
<col width="20%" />
<col width="18%" />
<col width="60%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Metric name</th>
<th align="left">Abbreviation</th>
<th align="left">Formula</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Overall Accuracy</td>
<td align="left"></td>
<td align="left"><span class="math inline">\(\frac{Correct}{Correct + Incorrect}\)</span></td>
</tr>
<tr class="even">
<td align="left">Macro Metric</td>
<td align="left"></td>
<td align="left"><span class="math inline">\({\scriptstyle \frac{1}{\lvert C \rvert}\sum_{c}^{C} metric_{c}}\)</span></td>
</tr>
<tr class="odd">
<td align="left">Support</td>
<td align="left"></td>
<td align="left"><span class="math inline">\({\scriptstyle support_c = \lvert \{ o \in O : o=c \} \rvert \quad \forall c \in C}\)</span></br><font size="1.5">I.e., a count of the class in the target column.</br> <span class="math inline">\(C\)</span>: the set of classes; <span class="math inline">\(O\)</span>: the observations.</br> <span class="math inline">\(\lvert x \rvert\)</span> denotes length of <span class="math inline">\(x\)</span>.</font></td>
</tr>
<tr class="even">
<td align="left">Weighted metric</td>
<td align="left"></td>
<td align="left"><span class="math inline">\(\frac{\sum_{c}^{C} metric_{c} \cdot support_{c}}{\sum_{c}^{C} support_{c}}\)</span></td>
</tr>
<tr class="odd">
<td align="left">Multiclass MCC</td>
<td align="left">MCC</td>
<td align="left"><span class="math inline">\({\scriptstyle \frac{N \operatorname{Tr}(C)-\sum_{k l} \tilde{\mathcal{C}}_{k} \hat{\mathcal{C}}_{l}}{\sqrt{N^{2}-\sum_{k l} \tilde{\mathcal{C}}_{k}\left(\hat{\mathcal{C}}^{\mathrm{T}}\right)_{l}} \sqrt{N^{2}-\sum_{k l}\left(\tilde{C}^{\mathrm{T}}\right)_{k} \hat{C}_{l}}} }\)</span> </br><font size="1.5"> <span class="math inline">\(N\)</span>: number of samples</br> <span class="math inline">\(C\)</span>: a <span class="math inline">\(K \times K\)</span> confusion matrix</br> <span class="math inline">\(Tr(C)\)</span>: Number of correct predictions</br> <span class="math inline">\(\tilde{\mathcal{C}}_{k}\)</span>: <span class="math inline">\(k\)</span>th row of <span class="math inline">\(C\)</span> ; <span class="math inline">\(\hat{C}_{l}\)</span>: <span class="math inline">\(l\)</span>th column of <span class="math inline">\(C\)</span></br> <span class="math inline">\(C^{T}\)</span>: <span class="math inline">\(C\)</span> transposed</br> Note: When the computation is <code>NaN</code>, we return <code>0</code>.</br>Code was ported from <a href="https://github.com/scikit-learn/scikit-learn/blob/95d4f0841/sklearn/metrics/_classification.py#L821" target="_blank">scikit-learn</a>.</br>Gorodkin, J. (2004). Comparing two K-category assignments by a K-category correlation coefficient. Computational biology and chemistry, 28(5-6), 367-374.</font></td>
</tr>
</tbody>
</table>
</div>
<div id="external-metrics" class="section level2">
<h2>External metrics</h2>
<p>These metrics are calculated by other packages:</p>
<table>
<thead>
<tr class="header">
<th align="left">Metric name</th>
<th align="left">Abbreviation</th>
<th align="left">Package::Function</th>
<th>Used in</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Aikake Information Criterion</td>
<td align="left">AIC</td>
<td align="left">stats::AIC</td>
<td>Shared</td>
</tr>
<tr class="even">
<td align="left">Corrected Aikake Information Criterion</td>
<td align="left">AICc</td>
<td align="left">MuMIn::AICc</td>
<td>Shared</td>
</tr>
<tr class="odd">
<td align="left">Bayesian Information Criterion</td>
<td align="left">BIC</td>
<td align="left">stats::BIC</td>
<td>Shared</td>
</tr>
<tr class="even">
<td align="left">Aikake Information Criterion</td>
<td align="left">AIC</td>
<td align="left">stats::AIC</td>
<td>Shared</td>
</tr>
<tr class="odd">
<td align="left">Marginal R-squared</td>
<td align="left">r2m</td>
<td align="left">MuMIn::r.squaredGLMM</td>
<td>Gaussian</td>
</tr>
<tr class="even">
<td align="left">Conditional R-squared</td>
<td align="left">r2c</td>
<td align="left">MuMIn::r.squaredGLMM</td>
<td>Gaussian</td>
</tr>
<tr class="odd">
<td align="left">ROC curve</td>
<td align="left">ROC</td>
<td align="left">pROC::roc</td>
<td>Binomial</td>
</tr>
<tr class="even">
<td align="left">Area Under the Curve</td>
<td align="left">AUC</td>
<td align="left">pROC::roc</td>
<td>Binomial</td>
</tr>
<tr class="odd">
<td align="left">Multiclass ROC curve</td>
<td align="left">ROC</td>
<td align="left">pROC::multiclass.roc</td>
<td>Multinomial</td>
</tr>
<tr class="even">
<td align="left">Multiclass Area Under the Curve</td>
<td align="left">AUC</td>
<td align="left">pROC::multiclass.roc</td>
<td>Multinomial</td>
</tr>
</tbody>
</table>
<p></br></p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
